<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>快捷功能布局测试</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        
        .test-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .test-header {
            padding: 16px;
            background: #4A90E2;
            color: white;
            text-align: center;
            font-size: 18px;
            font-weight: 600;
        }
        
        .quick-actions {
            padding: 20px;
        }
        
        .actions-title {
            margin: 0 0 16px 0;
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }
        
        .actions-row {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        
        .action-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #333;
            flex: 1;
        }
        
        .action-circle {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        
        .action-label {
            font-size: 12px;
            text-align: center;
            line-height: 1.2;
        }
        
        .booking { background: linear-gradient(135deg, #FF6B6B, #FF8E53); }
        .activity { background: linear-gradient(135deg, #4ECDC4, #44A08D); }
        .event { background: linear-gradient(135deg, #45B7D1, #96C93D); }
        .preference { background: linear-gradient(135deg, #F7DC6F, #F39C12); }
        .youth { background: linear-gradient(135deg, #BB6BD9, #C44569); }
        .more { background: linear-gradient(135deg, #E0E0E0, #BDBDBD); border: 2px dashed #999; }
        
        .divider {
            height: 1px;
            background: #f0f0f0;
            margin: 16px 0;
        }
        
        .status-info {
            background: #e6f7ff;
            border: 1px solid #91d5ff;
            border-radius: 8px;
            padding: 12px;
            margin: 16px 20px;
            font-size: 14px;
        }
        
        .requirement {
            background: #fff7e6;
            border: 1px solid #ffd591;
            border-radius: 8px;
            padding: 12px;
            margin: 16px 20px;
            font-size: 13px;
            line-height: 1.6;
        }
        
        .requirement h4 {
            margin: 0 0 8px 0;
            color: #d46b08;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            🚀 快捷功能布局测试
        </div>
        
        <div class="requirement">
            <h4>📋 需求规格</h4>
            <p><strong>布局规则：</strong></p>
            <ul style="margin: 8px 0; padding-left: 20px;">
                <li>每行显示5个功能</li>
                <li>最多显示2行（共10个）</li>
                <li>超过10个时，第10个位置显示"更多服务"</li>
                <li>数据完全从后台获取，支持排序</li>
            </ul>
        </div>
        
        <div class="quick-actions">
            <h3 class="actions-title">快捷功能</h3>
            
            <!-- 第一行：1-5 -->
            <div class="actions-row" id="row1">
                <!-- 将通过JavaScript动态填充 -->
            </div>
            
            <div class="divider"></div>
            
            <!-- 第二行：6-10 -->
            <div class="actions-row" id="row2">
                <!-- 将通过JavaScript动态填充 -->
            </div>
        </div>
        
        <div class="status-info" id="status">
            <strong>状态：</strong> 正在加载数据...
        </div>
    </div>

    <script>
        async function loadQuickActions() {
            const status = document.getElementById('status');
            const row1 = document.getElementById('row1');
            const row2 = document.getElementById('row2');
            
            try {
                status.innerHTML = '<strong>状态：</strong> 正在获取后端数据...';
                
                const response = await fetch('http://localhost:3000/home/quick-actions');
                const data = await response.json();
                
                if (data.success && data.data) {
                    const actions = data.data;
                    
                    // 清空容器
                    row1.innerHTML = '';
                    row2.innerHTML = '';
                    
                    // 第一行：显示前5个
                    for (let i = 0; i < Math.min(5, actions.length); i++) {
                        const action = actions[i];
                        row1.appendChild(createActionElement(action));
                    }
                    
                    // 第二行：显示6-10个
                    if (actions.length > 5) {
                        for (let i = 5; i < Math.min(9, actions.length); i++) {
                            const action = actions[i];
                            row2.appendChild(createActionElement(action));
                        }
                        
                        // 第10个位置的逻辑
                        if (actions.length >= 10) {
                            if (actions.length === 10) {
                                // 正好10个，显示第10个功能
                                row2.appendChild(createActionElement(actions[9]));
                            } else {
                                // 超过10个，显示更多服务
                                row2.appendChild(createMoreElement(actions.length - 9));
                            }
                        }
                    }
                    
                    status.innerHTML = `<strong>✅ 布局测试完成：</strong> 
                        共${actions.length}个功能，第一行${Math.min(5, actions.length)}个，
                        第二行${Math.max(0, Math.min(5, actions.length - 5))}个${actions.length > 10 ? '（含更多服务）' : ''}`;
                } else {
                    throw new Error('API返回数据格式错误');
                }
            } catch (error) {
                status.innerHTML = `<strong>❌ 加载失败：</strong> ${error.message}`;
                console.error('Error:', error);
            }
        }
        
        function createActionElement(action) {
            const item = document.createElement('a');
            item.className = 'action-item';
            item.href = action.redirectUrl;
            
            const circle = document.createElement('div');
            circle.className = `action-circle ${action.type}`;
            circle.textContent = action.icon;
            
            const label = document.createElement('div');
            label.className = 'action-label';
            label.textContent = action.title;
            
            item.appendChild(circle);
            item.appendChild(label);
            
            return item;
        }
        
        function createMoreElement(hiddenCount) {
            const item = document.createElement('a');
            item.className = 'action-item';
            item.href = '/more-services';
            
            const circle = document.createElement('div');
            circle.className = 'action-circle more';
            circle.innerHTML = '⋯';
            
            const label = document.createElement('div');
            label.className = 'action-label';
            label.textContent = '更多服务';
            
            item.appendChild(circle);
            item.appendChild(label);
            
            return item;
        }
        
        // 页面加载时自动获取数据
        window.onload = function() {
            loadQuickActions();
        };
    </script>
</body>
</html> 